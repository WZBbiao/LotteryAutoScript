# ✅ 代码已成功推送！

恭喜！你的代码已经成功推送到 GitHub：
- 🎉 飞书推送功能
- 🤖 GitHub Actions 自动化
- 📝 完整的配置文档

## 🚀 下一步：配置 GitHub Secrets（3分钟完成）

### 步骤 1：打开 Secrets 配置页面

**方式一：直接访问链接**
```
https://github.com/WZBbiao/LotteryAutoScript/settings/secrets/actions
```

**方式二：通过仓库导航**
1. 访问 https://github.com/WZBbiao/LotteryAutoScript
2. 点击 `Settings`（设置）
3. 左侧菜单：`Secrets and variables` → `Actions`
4. 点击 `New repository secret`（新建仓库密钥）

---

### 步骤 2：添加必需的 Secrets

点击绿色按钮 `New repository secret`，依次添加：

#### 🔑 必填项

**1. COOKIE（B站登录凭证）**
- Name: `COOKIE`
- Value: 你的B站Cookie
- 说明：用于登录B站账号

**如何获取 Cookie？**

方法一：使用浏览器控制台（推荐）
```
1. 打开 https://www.bilibili.com 并登录
2. 按 F12 打开开发者工具
3. 切换到 Console（控制台）标签
4. 粘贴以下代码并回车：

document.cookie.split(/\s*;\s*/)
  .map(it => it.split('='))
  .filter(it => ['DedeUserID','bili_jct','SESSDATA','buvid3'].includes(it[0]))
  .map(it => it.join('='))
  .join('; ')
  .split()
  .forEach(it => copy(it) || console.log(it))

5. Cookie 已自动复制到剪贴板
```

方法二：手动获取
```
1. 打开 https://www.bilibili.com 并登录
2. 按 F12 → Network（网络）标签
3. 刷新页面（F5）
4. 点击任意请求 → Headers（标头）
5. 找到 Cookie 字段，复制完整内容
```

Cookie 格式示例：
```
DedeUserID=123456789; SESSDATA=abc123...; bili_jct=xyz789...; buvid3=...
```

---

#### 🔔 推送通知（至少配置一个）

**2. FEISHU_WEBHOOK（飞书推送）**
- Name: `FEISHU_WEBHOOK`
- Value: `https://open.feishu.cn/open-apis/bot/v2/hook/080c9bea-f498-4695-a9f2-f85b2d2a98c5`
- 说明：你的飞书机器人 Webhook 地址

**其他推送方式（可选）：**

| Name | 说明 | 获取方式 |
|------|------|---------|
| `SENDKEY` | Server酱推送 | https://sct.ftqq.com/sendkey |
| `TG_BOT_TOKEN` | Telegram Bot | @BotFather 获取 |
| `TG_USER_ID` | Telegram 用户ID | @getuseridbot 获取 |
| `BARK_PUSH` | iOS Bark | Bark APP 中查看 |
| `DD_BOT_TOKEN` | 钉钉机器人 | 钉钉群机器人设置 |

---

#### 🤖 AI 评论（可选）

**3. AI_API_KEY**
- Name: `AI_API_KEY`
- Value: 你的 OpenAI API Key 或兼容的 API Key
- 说明：用于 AI 自动生成评论内容

---

### 步骤 3：启用 GitHub Actions

#### 3.1 访问 Actions 页面
```
https://github.com/WZBbiao/LotteryAutoScript/actions
```

#### 3.2 启用 Workflows

如果看到提示：
```
Workflows aren't being run on this forked repository
```

点击绿色按钮：
```
I understand my workflows, go ahead and enable them
```

---

### 步骤 4：测试运行（推荐）

#### 4.1 手动触发 Workflow

1. 在 Actions 页面，点击左侧 `B站抽奖自动脚本`
2. 点击右侧 `Run workflow` 下拉菜单
3. 选择运行模式：
   - `start` - 启动抽奖
   - `check` - 检查中奖
   - `clear` - 清理动态
4. 点击绿色的 `Run workflow` 按钮

#### 4.2 查看运行日志

1. 点击正在运行的 workflow（黄色圆圈 🟡）
2. 点击对应的 job（如 "启动抽奖"）
3. 展开各个步骤查看日志
4. 成功会显示绿色对勾 ✅

#### 4.3 验证飞书推送

- 检查飞书是否收到测试消息
- 如果收到，说明配置完全正常！🎉

---

## 📅 自动运行时间表

配置完成后，脚本会自动在以下时间运行：

| 任务 | 北京时间 | 说明 |
|-----|---------|------|
| 🎰 启动抽奖 | 每天 08:00 | 自动参与新的抽奖活动 |
| 🎁 检查中奖 | 每天 20:00 | 检查是否中奖并推送通知 |

**如何修改运行时间？**

编辑 `.github/workflows/lottery.yml` 文件中的 cron 表达式：

```yaml
schedule:
  # 北京时间 = UTC时间 + 8小时
  - cron: '0 0 * * *'   # 每天 08:00
  - cron: '0 12 * * *'  # 每天 20:00
```

常用时间对照表：

| 北京时间 | UTC时间 | Cron 表达式 |
|---------|---------|------------|
| 06:00 | 22:00 前一天 | `0 22 * * *` |
| 08:00 | 00:00 | `0 0 * * *` |
| 12:00 | 04:00 | `0 4 * * *` |
| 18:00 | 10:00 | `0 10 * * *` |
| 20:00 | 12:00 | `0 12 * * *` |
| 22:00 | 14:00 | `0 14 * * *` |

---

## 🔍 故障排查

### ❌ Cookie 失效

**错误信息：** `Cookie已失效`

**解决方案：**
1. 重新获取 Cookie
2. 更新 GitHub Secrets 中的 `COOKIE`
3. 注意：在网页端点击"退出"会使 Cookie 立即失效

---

### ❌ Actions 未运行

**可能原因：**
1. Fork 的仓库默认禁用 Actions
2. 未手动启用 Workflows

**解决方案：**
访问 Actions 页面，点击启用按钮

---

### ❌ 飞书推送失败

**错误信息：** `飞书机器人发送失败`

**解决方案：**
1. 检查 `FEISHU_WEBHOOK` 地址是否正确
2. 确认飞书机器人未被禁用
3. 测试 Webhook 是否可访问

---

### ❌ 权限错误

**错误信息：** `Permission denied`

**解决方案：**
1. 确认 Actions 已启用
2. 检查 Secrets 是否正确添加
3. 确认仓库权限设置正确

---

## 📊 查看运行历史

访问 Actions 页面可以看到：
```
https://github.com/WZBbiao/LotteryAutoScript/actions
```

- ✅ 绿色：运行成功
- ❌ 红色：运行失败
- 🟡 黄色：正在运行
- ⏱️ 运行时长和趋势

---

## 🎉 完成！

按照以上步骤操作后，你的 B站抽奖脚本将：

- ✅ 每天自动运行
- ✅ 自动参与抽奖
- ✅ 检查中奖并推送
- ✅ 无需本地电脑开机
- ✅ 完全免费使用

---

## 📚 相关文档

- [GitHub Actions 配置指南](GitHub-Actions-配置指南.md)
- [部署指南](部署指南.md)
- [项目 README](README.md)

---

## 💬 需要帮助？

如果遇到问题：
1. 查看上面的故障排查部分
2. 检查 Actions 运行日志
3. 查阅配置指南文档

---

## 🎯 快速链接

**立即配置：**
- 🔑 [添加 Secrets](https://github.com/WZBbiao/LotteryAutoScript/settings/secrets/actions)
- 🤖 [启用 Actions](https://github.com/WZBbiao/LotteryAutoScript/actions)
- 📊 [查看运行](https://github.com/WZBbiao/LotteryAutoScript/actions)

**开始配置 Secrets 👉 点击上面的链接！**
